# About the project

## Description

This project is the continuation of the previous front end project: Good Night Tale
The project is utilizing openai's chat completion and image generation capability to generate tales suitable for kids before bedtime.

This time the project is using a Postgres database, with TypeORM and trpc to ensuere type safety.

## trpc procedures and entities

1. tale: _create, find, get, getTitles, update_

`The tale that was generated by openAI will be saved to the database. The user will be able to later change the title of it, or mark it as saved. Additional features could be the option to search amongst the titles. Delete procedure will also be added later.`

2. illustration: _create, download, find, remove, update_

`The illustration that will be generated by DallE will be stored in a database table with connection to the tale they belong to. Download and remove procedures are added as a pre-step for further implementation. As images generated by DallE are only available for 60 minutes, the application will download the images, and then upload them to an S3 bucket. Download and remove are parts of this future implementation. Update is enabling the users to update the prompts by which the images were generated and generate hand-crafted illustrations.`

3. user: _login, signup_

`General user management with the option to signup or login. Currently no delete procedure is planned. May be a later addition to this.`

4. openai: _chat, visual_

`The procedures that will call openAI's API endpoints.`

## Setup

1. `npm install`
2. Create a PostgreSQL database.
3. Setup `.env` files in `client` and `server` based on `.env.example` files.

## Tests

```bash
# front end unit and E2E tests
npm test -w client

# front end unit tests
npm run test:unit -w client

# front end E2E tests
npm run test:e2e -w client

# back end tests with an in-memory database
npm test -w server

# back end tests with a development database
npm run test:db -w server
```

## Running the project in development

```bash
# automatically restarts the server
npm run dev -w server

# server can be started without a database
npm run dev:mem -w server

# client can be started separately
npm run dev -w client
```

## Running the project in production

Client:

```bash
npm run build -w client
npm run preview -w client
```

Server:

```bash
npm run build -w server
npm run start -w server
```
