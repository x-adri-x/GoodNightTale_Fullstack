Note to reviewer: I added some Issues to the project, which are issues I am aware of but did not have time to implement solutions for.

# Description

The project is utilizing openai's chat completion and image generation capability to generate tales suitable for kids before bedtime.
Public domain where the application could be accessed: [Good Night Tale App](https://goodnight-tale.gj5v4gtm6oof6.eu-central-1.cs.amazonlightsail.com/)

## Prerequisites

1. User needs to create an account in order to use the application.

## Features

1. As a user I am able to pick 5 keywords from a randomly generated list of words, OR enter my own choice of words.
2. As a user I am able to generate a tale with the 5 selected keywords.
3. After the tale was generated I am able to save it into my Storybook, so I will have access to it later.
4. As a user I am able to open tales from my Storybook, and mark them as Favorite.
5. As a user I am able to edit my saved tales.
6. As a user I am able to change the title of the tale.
7. As a user I am able to change the prompts that were automatically generated for me by chatGPT, and generate new illustrations based on my own prompts.
8. As a user I can choose to save the newly generated illustrations and replace the currently saved illustration in my tale, or discard the changes.

## trpc procedures and entities

1. tale: _create, find, get, getTitles, update_

> Note: _getTitles_ is an unused procedure, as the front end is not yet developed for it. Please find more details under Issues.

---

2. illustration: _create, download, find, update, upload_

> The illustrations generated by DallE are stored in the database.
>
> As images generated by DallE are only available for 60 minutes, the application will download the
>
> images, and upload them to S3. Download and upload are parts of
>
> this implementation.

---

3. user: _login, signup_

> General user management with the option to signup or login. >
>
> Check Issues for future improvements on this procedure.

---

4. openai: _chat, visual_

> The procedures that will call openAI's API endpoints.

## Setup

1. `npm install`
2. Create a PostgreSQL database.
3. Setup `.env` files in `client` and `server` based on `.env.example` files.

## Tests

```bash
# front end unit and E2E tests
npm test -w client

# front end unit tests
npm run test:unit -w client

# front end E2E tests
npm run test:e2e -w client

# back end tests with an in-memory database
npm test -w server

# back end tests with a development database
npm run test:db -w server
```

## Running the project in development

```bash
# automatically restarts the server
npm run dev -w server

# server can be started without a database
npm run dev:mem -w server

# client can be started separately
npm run dev -w client
```

## Running the project in production

Client:

```bash
npm run build -w client
npm run preview -w client
```

Server:

```bash
npm run build -w server
npm run start -w server
```
